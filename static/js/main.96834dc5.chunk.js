(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/TESTdarkside.2bd292a8.jpeg"},124:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(62),i=n.n(s),r=(n(69),n(2)),l=n(3),u=n(5),c=n(4),d=n(6),g=(n(27),n(21)),m=n.n(g),p=(n(116),n(120),n(126),{apiKey:"AIzaSyBLea3SENzTDx8fHj3oo3vktAF-7B3jyXQ",authDomain:"blinq-43545.firebaseapp.com",databaseURL:"https://blinq-43545.firebaseio.com",projectId:"blinq-43545",storageBucket:"blinq-43545.appspot.com",messagingSenderId:"234958171789"}),h=function e(){Object(r.a)(this,e),m.a.apps.length||m.a.initializeApp(p),this.db=m.a.database(),this.auth=m.a.auth(),this.storage=m.a.storage()},f=n(63),v=n.n(f),S=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleLogin=function(){n.hideSigninFields();var e=n.state.username,t=n.state.password;console.log("SignUp submit pressed - username ".concat(e)),n.validateEmail(e)?(n.setState({username:"",password:""}),n.firebase.auth.signInWithEmailAndPassword(e,t).then(function(){n.props.signIn("songwall")}).catch(function(e){var t=e.code,a=e.message;alert("".concat(t,": ").concat(a)),n.showSigninFields()})):alert("Bad email me thinks :(")},n.keyPress=function(e){13===e.keyCode&&n.handleLogin()},n.hideSigninFields=function(){n.setState({SHOWFIELDS:!1})},n.showSigninFields=function(){n.setState({SHOWFIELDS:!0})},n.state={username:"",password:"",SHOWFIELDS:!0},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"validateEmail",value:function(e){return/^\S+@\S+$/.test(String(e).toLowerCase())}},{key:"validatePassword",value:function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/.test(String(e))}},{key:"render",value:function(){return this.state.SHOWFIELDS?o.a.createElement("form",{id:"signin-form"},o.a.createElement("label",{htmlFor:"signin-username"},"E-mail"),o.a.createElement("input",{id:"signin-username",value:this.state.username,onChange:this.handleUsernameChange}),o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",id:"signin-password",onKeyDown:this.keyPress,value:this.state.password,onChange:this.handlePasswordChange}),o.a.createElement("div",null,o.a.createElement("button",{id:"submit-signin-btn",onClick:this.handleLogin}," Sign in! "))):o.a.createElement("div",null,"One Moment...")}}]),t}(a.Component),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).hideSignupFields=function(){n.setState({SHOWFIELDS:!1})},n.showSignupFields=function(){n.setState({SHOWFIELDS:!0})},n.handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(){var e=n.state.username,t=n.state.password;return console.log("SignUp submit pressed - username ".concat(e)),n.validateEmail(e)?n.validatePassword(t)?void n.firebase.auth.createUserWithEmailAndPassword(e,t).catch(function(e){var t=e.code,n=e.message;console.log("".concat(t,": ").concat(n))}):(alert("Bad password. Must be 7-15 characters with at least 1 numeric digit and a special character."),void n.setState({password:""})):(alert("Bad email me thinks :("),void n.setState({username:""}))},n.handleGotoSignIn=function(){n.props.gotoSignIn("signin"),console.log("Goto signin pressed")},n.state={username:"",password:"",SHOWFIELDS:!1},n.firebase=new h,n.firebase.auth.onAuthStateChanged(function(e){e?n.postUserToFirebase(e.uid,e.email):n.showSignupFields()}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"postUserToFirebase",value:function(e,t){var n=(new Date).getTime(),a={uid:e,username:t,email:t,createdAt:n,updatedAt:n},o={};return o["/users/"+e]=a,this.firebase.db.ref().update(o)}},{key:"validateEmail",value:function(e){return/^\S+@\S+$/.test(String(e).toLowerCase())}},{key:"validatePassword",value:function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/.test(String(e))}},{key:"render",value:function(){return this.state.SHOWFIELDS?o.a.createElement("div",{id:"signup-div"},o.a.createElement("h3",null,"Sign Up"),o.a.createElement("div",null,"Email:",o.a.createElement("input",{id:"signup-username",value:this.state.username,onChange:this.handleUsernameChange})),o.a.createElement("div",null,"Password:",o.a.createElement("input",{type:"password",id:"signup-password",value:this.state.password,onChange:this.handlePasswordChange})),o.a.createElement("div",null,o.a.createElement("button",{id:"submit-signup-btn",onClick:this.handleSubmit}," Sign up! ")),o.a.createElement("div",null,o.a.createElement("button",{id:"goto-signin-btn",onClick:this.handleGotoSignIn}," Sign in! "))):o.a.createElement("div",null,"One Moment...")}}]),t}(a.Component),E=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).gotoEditProfile=function(){n.props.goto("editprofile")},n.handleResetPassword=function(){n.firebase.auth.sendPasswordResetEmail(n.state.email),alert("Password reset email sent!")},n.state={email:n.props.email},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"Reset-Password-Div"},o.a.createElement("h3",null,"Reset Password?"),o.a.createElement("button",{onClick:this.handleResetPassword}," Confirm Reset Password "),o.a.createElement("button",{onClick:this.gotoEditProfile}," Nevermind "))}}]),t}(a.Component),P=(n(8),n(11)),y=n.n(P),C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handlePlay=function(){console.log("SongListItem play: "+n.props.song.songName),n.props.setSong(n.props.song)},n.handleUploaderClick=function(){console.log("SongListItem uploader: "+n.props.song.uploader),n.props.setProfile(n.props.song.uploader)},n.handleSongNameClick=function(){n.props.setSongDetails(n.props.song.id)},n.state={},console.log(n.props.song.duration),console.log("song list item dur:"+n.props.song.duration),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"formatMinutesSeconds",value:function(e){return(e-(e%=60))/60+(9<e?":":":0")+e}},{key:"render",value:function(){return o.a.createElement("div",{className:"SongListItem"},o.a.createElement("div",null,o.a.createElement("button",{className:"Song-Item-Play-Btn",onClick:this.handlePlay},o.a.createElement("img",{src:y.a,className:"songArt",alt:"Song Art"}),this.formatMinutesSeconds(this.props.song.duration)," \u25b6")),o.a.createElement("div",{className:"songListItemRight"},o.a.createElement("div",{className:"songHeader"},o.a.createElement("div",null,o.a.createElement("div",{className:"songName"},o.a.createElement("button",{onClick:this.handleSongNameClick},this.props.song.songName)),o.a.createElement("div",{className:"artistName"},o.a.createElement("i",null,"by")," "," "+this.props.song.artist)),o.a.createElement("div",{className:"recordingDate"},new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit"}).format(this.props.song.recorded))),o.a.createElement("div",{className:"songInfo"},this.props.song.info),o.a.createElement("button",{className:"songList-Uploader-Btn",onClick:this.handleUploaderClick},"Uploader: ",this.props.song.uploader)))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).getSongs=function(){n.firebase.db.ref().child("songs").on("child_added",function(e){var t=n.state.songs;t.push({url:e.val().url,songName:e.val().songName,artist:e.val().artist,recorded:e.val().recorded,info:e.val().info,uploader:e.val().uploader,uploaderName:e.val().uploaderName,uploaded:e.val().uploaded,published:e.val().published,id:e.val().id,duration:e.val().duration}),n.setState({songs:t})})},n.handleSetSong=function(e){console.log("SongWall: handleSetSong("+e.songName),n.props.setSong(e)},n.gotoProfile=function(e){console.log("SongWall: gotoProfile("+e),n.props.gotoProfile(e)},n.gotoSongDetails=function(e){console.log("SongWall: gotoSongDetails("+e),n.props.gotoSongDetails(e)},n.state={songs:[],lastProps:null},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("SongWall component mounted"),this.getSongs()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"Songs-List"},this.state.songs.map(function(t){return o.a.createElement(C,{song:t,key:t.id,setSong:e.handleSetSong,setProfile:e.gotoProfile,setSongDetails:e.gotoSongDetails})}))}}]),t}(a.Component),N=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handlePlay=function(){n.props.playSong(n.props.song)},n.handlePublishPressed=function(){var e=n.props.song;if(console.log("pubstate"+e.published),void 0===e.published||null===e.published){var t=(new Date).getTime();e.published=t,n.setState({song:e}),console.log("Publish: "+e);var a={};return a["/songs/"+e.id]=e,a["/published-songs/"+e.uploader+"/"+e.id]=e,a["/user-songs/"+e.uploader+"/"+e.id]=e,n.firebase.db.ref().update(a)}e.published=null,n.setState({song:e}),console.log("Unpublish: "+e),n.firebase.db.ref().child("songs").child(e.id).remove(),n.firebase.db.ref().child("published-songs").child(e.uploader).child(e.id).remove();var o={};return o["/user-songs/"+e.uploader+"/"+e.id]=e,n.firebase.db.ref().update(o)},n.state={song:n.props.song},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"formatMinutesSeconds",value:function(e){return(e-(e%=60))/60+(9<e?":":":0")+e}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"PublishSongListItem"},o.a.createElement("div",null,o.a.createElement("button",{className:"Publish-Song-Play-Btn",onClick:this.handlePlay},o.a.createElement("img",{src:y.a,className:"PublishSongArt",alt:"Song Art"}),this.formatMinutesSeconds(this.props.song.duration)," \u25b6")),o.a.createElement("div",{className:"songListItemRight"},o.a.createElement("div",{className:"songHeader"},o.a.createElement("div",null,o.a.createElement("div",{className:"PublishSongName"},this.props.song.songName),o.a.createElement("div",{className:"PublishSongArtistName"},o.a.createElement("i",null,"by")," "," "+this.props.song.artist)),o.a.createElement("div",{className:"PublishSongRecordingDate"},new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit"}).format(this.props.song.recorded))),o.a.createElement("div",{className:"PublishSongInfo"},this.props.song.info)),o.a.createElement("div",null,e.state.song.published?o.a.createElement("button",{className:"PublishSong-unpublish-button",onClick:e.handlePublishPressed},"\ud83d\udec7",o.a.createElement("br",null),"UNPUBLISH"):o.a.createElement("button",{className:"PublishSong-publish-button",onClick:e.handlePublishPressed},"\u2713",o.a.createElement("br",null),"PUBLISH")))}}]),t}(a.Component),k=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleUpload=function(){n.props.goto("postsong")},n.handleRecord=function(){n.props.goto("record")},n.handlePlaySong=function(e){n.props.playSong(e)},n.getSongs=function(){n.firebase.db.ref().child("user-songs").child(n.state.user.uid).on("child_added",function(e){var t=n.state.songs;t.push({songName:e.val().songName,url:e.val().url,artist:e.val().artist,recorded:e.val().recorded,info:e.val().info,uploader:e.val().uploader,uploaderName:e.val().uploaderName,uploaded:e.val().uploaded,published:e.val().published,id:e.val().id,duration:e.val().duration}),n.setState({songs:t})})},n.state={user:n.props.user,songs:[]},n.firebase=new h,n.getSongs(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{id:"Studio-Add-Song-Btns"},o.a.createElement("button",{id:"Studio-Upload-Btn",onClick:this.handleUpload},"Upload"),o.a.createElement("button",{id:"Studio-Record-Btn",onClick:this.handleRecord},"Record")),o.a.createElement("div",{id:"Studio-Songs-List"},this.state.songs.map(function(t){return o.a.createElement(N,{song:t,key:t.id,playSong:e.handlePlaySong})})))}}]),t}(a.Component),O=n(16),j=n.n(O),I=n(33),D=n(34),B=n.n(D),L=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).startRecording=function(){n.audioChunks=[],n.mediaRecorder.start(10),n.setState({recording:!0})},n.stopRecording=function(){n.mediaRecorder.stop(),n.setState({recording:!1,saving:!0}),n.saveAudio()},n.handleRecordBtn=function(){console.log("record btn pressed..."),n.state.recording?n.stopRecording():n.startRecording()},n.state={user:n.props.user,recording:!1},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){e.mediaRecorder=new MediaRecorder(t),e.audioChunks=[],e.mediaRecorder.ondataavailable=function(t){t.data&&t.data.size>0&&e.audioChunks.push(t.data)}})}},{key:"postToFirebase",value:function(e,t){var n,a=this,o=(new Date).getTime(),s=this.firebase.db.ref().child("user-songs").child(this.state.user.uid).push().key;this.firebase.storage.ref().child("songs").child(this.state.user.uid).child(s).child(s+".mp3").put(e,{contentType:"audio/mpeg"}).then(function(e){return e.ref.getDownloadURL()}).then(function(e){console.log(e),n={url:e,id:s,songName:s,artist:a.state.user.username,info:"",recorded:o,uploaded:o,uploader:a.state.user.uid,uploaderName:a.state.user.username,published:null,duration:t,saving:!1};var i={};return i["/user-songs/"+a.state.user.uid+"/"+s]=n,a.firebase.db.ref().update(i)}).then(function(){a.props.goto("studio")})}},{key:"saveAudio",value:function(){var e=Object(I.a)(j.a.mark(function e(){var t,n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Blob(this.audioChunks,{type:"audio/mpeg-3"}),e.next=3,B()(t);case 3:n=e.sent,this.postToFirebase(t,Math.floor(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.saving?o.a.createElement("div",{id:"Record-Page"},"Please wait..."):o.a.createElement("div",{id:"Record-Page"},o.a.createElement("button",{id:"Record-Record-Btn",onClick:this.handleRecordBtn},e.state.recording?"STOP":"RECORD"),o.a.createElement("audio",{id:"recordedAudio"}))}}]),t}(a.Component),T=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleSongNameChange=function(e){n.setState({songName:e.target.value})},n.handleArtistNameChange=function(e){n.setState({artistName:e.target.value})},n.handleSongInfoChange=function(e){n.setState({songInfo:e.target.value})},n.handleSubmit=function(){""!==n.state.songName&&""!==n.state.artistName&&""!==n.state.songInfo?(n.setState({showForm:!1}),console.log("submitPressed: ".concat(n.state.artistName," - ").concat(n.state.songName,": ").concat(n.state.songInfo)),n.setState({songName:""}),n.setState({artistName:""}),n.setState({songInfo:""}),n.postToFirebase(n.state.songName,n.state.artistName,n.state.songInfo)):alert("Missing information for song upload...")},n.state={songName:"",artistName:"",songInfo:"",showForm:!0,user:n.props.user},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"postToFirebase",value:function(){var e=Object(I.a)(j.a.mark(function e(t,n,a){var o,s,i,r,l,u,c,d,g=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new Date,s=o.getTime(),i=this.firebase.db.ref().child("songs").push().key,r=this.firebase.storage.ref().child("songs"),l=document.querySelector("#uploadAudioInput").files[0],e.next=7,B()(l);case 7:u=e.sent,c={contentType:l.type},r.child(this.props.user.uid).child(i).child(t+".mp3").put(l,c).then(function(e){return e.ref.getDownloadURL()}).then(function(e){console.log(e),d={url:e,id:i,songName:t,artist:n,info:a,recorded:s,uploaded:s,uploader:g.props.user.uid,uploaderName:g.props.user.username,published:null,duration:Math.floor(u)};var o={};return o["/user-songs/"+g.props.user.uid+"/"+i]=d,g.firebase.db.ref().update(o)}).then(function(){g.props.goto("studio")});case 11:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return!0===this.state.showForm?o.a.createElement("div",{id:"submit-song-box"},o.a.createElement("div",null,o.a.createElement("input",{accept:".mp3,.mp4,.wmv,.m4a",type:"file",id:"uploadAudioInput"})),o.a.createElement("div",null,"Song Name:",o.a.createElement("textarea",{id:"song-name-area",value:this.state.songName,onChange:this.handleSongNameChange})),o.a.createElement("div",null,"Artist:",o.a.createElement("textarea",{id:"artist-names-area",value:this.state.artistName,onChange:this.handleArtistNameChange})),o.a.createElement("div",null,"Additional Info:",o.a.createElement("textarea",{id:"song-info-area",value:this.state.songInfo,onChange:this.handleSongInfoChange})),o.a.createElement("button",{id:"post-button",onClick:this.handleSubmit},"Upload Song")):o.a.createElement("div",null,"Please Wait...")}}]),t}(a.Component),A=n(35),M=n.n(A),U=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).gotoPublicProfile=function(){n.props.gotoProfile(n.state.user.uid)},n.handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handleSubmit=function(){},n.handleChangePassword=function(){n.props.goto("changepw")},n.state={username:"",user:n.props.user},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"Profile-Page"},o.a.createElement("div",{id:"Profile-Page-Header"},o.a.createElement("div",{id:"Profile-Page-Header-Left"},o.a.createElement("button",{id:"view-public-btn",onClick:this.gotoPublicProfile},"View Public"),o.a.createElement("div",null,"Name: ",this.props.user.name),o.a.createElement("div",null,"Username: ",this.props.user.username),o.a.createElement("div",null,"Email: ",this.props.user.email),o.a.createElement("div",null,"Bio: stuff stuff stuff stuff stuff"),o.a.createElement("button",{onClick:this.handleChangePassword},"Change Password")),o.a.createElement("div",null,o.a.createElement("img",{src:M.a,className:"Profile-Page-img",alt:"Profile"}))))}}]),t}(a.Component),R=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handlePlay=function(){n.props.setSong(n.props.song)},n.handleUploaderClick=function(){n.props.setProfile(n.props.song.uploader)},n.handleSongNameClick=function(){n.props.setSongDetails(n.props.song.id)},n.state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"SongListItem"},o.a.createElement("div",null,o.a.createElement("button",{className:"Song-Item-Play-Btn",onClick:this.handlePlay},o.a.createElement("img",{src:y.a,className:"songArt",alt:"Song Art"}),this.props.song.songLength," \u25b6")),o.a.createElement("div",{className:"songListItemRight"},o.a.createElement("div",{className:"songHeader"},o.a.createElement("div",null,o.a.createElement("div",{className:"songName"},o.a.createElement("button",{onClick:this.handleSongNameClick},this.props.song.songName)),o.a.createElement("div",{className:"artistName"},o.a.createElement("i",null,"by")," "," "+this.props.song.artist)),o.a.createElement("div",{className:"recordingDate"},new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit"}).format(this.props.song.recorded))),o.a.createElement("div",{className:"songInfo"},this.props.song.info)))}}]),t}(a.Component),F=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).getUser=function(){n.firebase.db.ref().child("users").child(n.props.profileId).on("value",function(e){n.setState({user:e.val()})},function(e){console.log("User profile get failed: "+e.code)})},n.handleSetSong=function(e){console.log(e),n.props.setSong(e)},n.gotoSongDetails=function(e){console.log(e),n.props.gotoSongDetails(e)},n.getSongs=function(){n.firebase.db.ref().child("published-songs").child(n.props.profileId).on("child_added",function(e){var t=n.state.songs;t.push({url:e.val().url,songName:e.val().songName,artist:e.val().artist,recorded:e.val().recorded,info:e.val().info,uploader:e.val().uploader,uploaderName:e.val().uploaderName,uploaded:e.val().uploaded,published:e.val().published,id:e.val().id,duration:e.val().id}),n.setState({songs:t})})},n.state={user:null,songs:[],profileId:n.props.profileId},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUser(),this.getSongs()}},{key:"render",value:function(){var e=this;return null!==this.state.user?o.a.createElement("div",{id:"Profile-Page"},o.a.createElement("div",{id:"Profile-Page-Header"},o.a.createElement("div",{id:"Profile-Page-Header-Left"},o.a.createElement("div",null,"Name: ",this.state.user.name),o.a.createElement("div",null,"Username: ",this.state.user.username),o.a.createElement("div",null,"Email: ",this.state.user.email),o.a.createElement("div",null,"Bio: stuff stuff stuff stuff stuff")),o.a.createElement("div",null,o.a.createElement("img",{src:M.a,className:"Profile-Page-img",alt:"Profile"}))),o.a.createElement("div",{id:"Profile-Songs-List"},this.state.songs.map(function(t){return o.a.createElement(R,{song:t,key:t.id,setSong:e.handleSetSong,setSongDetails:e.gotoSongDetails})}))):o.a.createElement("div",null)}}]),t}(a.Component),W=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handlePlay=function(){console.log("SongDetails play: "+n.props.song.songName),console.log("aaan..."+n.props.song.id),n.props.setSong(n.props.song)},n.state={song:n.props.song},n.firebase=new h,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"formatMinutesSeconds",value:function(e){return(e-(e%=60))/60+(9<e?":":":0")+e}},{key:"render",value:function(){return o.a.createElement("div",{id:"Song-Details-Page"},o.a.createElement("div",null,this.props.song.songName),o.a.createElement("button",{className:"Details-Play-Btn",onClick:this.handlePlay},o.a.createElement("img",{src:y.a,className:"Song-Details-img",alt:"Song Art"}),o.a.createElement("div",null,this.formatMinutesSeconds(this.props.song.duration)," \u25b6")),o.a.createElement("div",null,this.props.song.artist),o.a.createElement("div",null,this.props.song.info))}}]),t}(a.Component),H=(n(124),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handlePlayOrPause=function(){""!==n.audioPlayer.src?n.audioPlayer.ended||n.audioPlayer.paused?n.audioPlayer.play():n.audioPlayer.ended||n.audioPlayer.paused||n.audioPlayer.pause():alert("Error: nothing to play!")},n.handleSeekBarClick=function(e){var t=(e.pageX-e.target.offsetLeft)/n.seekBar.current.offsetWidth;n.audioPlayer.currentTime=n.audioPlayer.duration*t},n.handleVolumeBarClick=function(e){var t=1-(e.pageY-e.target.offsetTop)/n.volumeBar.current.offsetHeight;t<=.05?t=0:t>=.95&&(t=1),n.audioPlayer.volume=t},n.state={song:null,musicPosition:"0%",volumePosition:"100%",songDuration:"",currentPosition:""},n.audioPlayer=new Audio,n.audioPlayer.loop=!1,n.audioPlayer.addEventListener("timeupdate",function(){var e=n.audioPlayer.currentTime/n.audioPlayer.duration;n.setState({musicPosition:100*e+"%",currentPosition:n.formatMinutesSeconds(Math.floor(n.audioPlayer.currentTime))})}),n.audioPlayer.addEventListener("volumechange",function(){var e=n.audioPlayer.volume;n.setState({volumePosition:100*e+"%"})}),n.seekBar=o.a.createRef(),n.volumeBar=o.a.createRef(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUpdate",value:function(e){null!==e.song&&void 0!==e.song.url&&(null!==this.state.song&&e.song.id===this.state.song.id||(this.setState({song:e.song,songDuration:this.formatMinutesSeconds(Math.floor(e.song.duration))}),this.audioPlayer.src=e.song.url,this.audioPlayer.play()))}},{key:"formatMinutesSeconds",value:function(e){return(e-(e%=60))/60+(9<e?":":":0")+e}},{key:"render",value:function(){return null!==this.state.song?o.a.createElement("div",{id:"Top-Bar-Player"},o.a.createElement("div",{id:"Top-Player-Center-Div"},o.a.createElement("div",{id:"Top-Player-Info-Div"},o.a.createElement("div",{id:"Top-Player-Artist"},this.state.song.artist),"\xa0-\xa0",o.a.createElement("div",{id:"Top-Player-Song"},this.state.song.songName)),o.a.createElement("div",{id:"Top-Player-Time-Div"},o.a.createElement("div",{className:"Top-Player-Time-Text-Div"},this.state.currentPosition),o.a.createElement("div",{id:"seek-bar",ref:this.seekBar,onClick:this.handleSeekBarClick},o.a.createElement("div",{id:"fill",style:{width:this.state.musicPosition}}),o.a.createElement("div",{id:"handle"})),o.a.createElement("div",{className:"Top-Player-Time-Text-Div"},this.state.songDuration)),o.a.createElement("div",{id:"Top-Player-Btns"},o.a.createElement("button",{id:"TP-Play-Pause-Btn",onClick:this.handlePlayOrPause},"\u25b6"))),o.a.createElement("div",{id:"volume-bar",ref:this.volumeBar,onClick:this.handleVolumeBarClick},o.a.createElement("div",{id:"volume-fill",style:{height:this.state.volumePosition}}),o.a.createElement("div",{id:"volume-handle"}))):o.a.createElement("div",null)}}]),t}(a.Component)),x=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).getUserFromDatabase=function(e){n.firebase.db.ref().child("users").child(e).on("value",function(e){n.setState({user:e.val()})},function(e){console.log("The user read failed: "+e.code)})},n.handleSignOut=function(){n.setState({user:null}),n.firebase.auth.signOut().then(function(){console.log("signed out")}).catch(function(e){console.log("Error signing out: ".concat(e))})},n.handleSignIn=function(){n.setState({mainContent:"songwall"})},n.handleSetSong=function(e){console.log("App: handleSetSong( "+e.songName),null!==n.state.currentSong&&e.url!==n.state.currentSong.url?n.setState({currentSong:e}):null==n.state.currentSong&&n.setState({currentSong:e})},n.setMainContent=function(e){n.setState({mainContent:e})},n.handleSearch=function(){alert("App.handleSearch... nothing doing yet")},n.openSongWall=function(){"songwall"!==n.state.mainContent&&n.setState({mainContent:"songwall"})},n.openPostSong=function(){"postsong"!==n.state.mainContent&&n.setState({mainContent:"postsong"})},n.openStudio=function(){"studio"!==n.state.mainContent&&n.setState({mainContent:"studio"})},n.openRecord=function(){"record"!==n.state.mainContent&&n.setState({mainContent:"record"})},n.openEditProfile=function(){"editprofile"!==n.state.mainContent&&n.setState({mainContent:"editprofile"})},n.gotoProfile=function(e){console.log("goto profile: "+e),n.state.viewProfileId!==e&&n.setState({viewProfileId:e}),"profile"!==n.state.mainContent&&n.setState({mainContent:"profile"})},n.gotoSongDetails=function(e){(console.log("App: gotoSongDetails("+e),null===n.state.viewSong||n.state.viewSong.id!==e)?n.firebase.db.ref().child("songs").child(e).once("value",function(e){n.setState({viewSong:e.val()})}).then(function(){"songdetails"!==n.state.mainContent&&n.setState({mainContent:"songdetails"})}):"songdetails"!==n.state.mainContent&&n.setState({mainContent:"songdetails"})},n.state={mainContent:"signin",username:"",user:null,currentSong:null,viewSong:null,viewProfileId:null},n.firebase=new h,n.firebase.auth.onAuthStateChanged(function(e){e&&n.getUserFromDatabase(e.uid)}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-body"},o.a.createElement("div",{id:"App-Inner-Body"},o.a.createElement("div",{id:"App-Header"},o.a.createElement("div",{className:"spacer-240w"}),function(){if(e.state.user)return o.a.createElement(H,{song:e.state.currentSong})}()),o.a.createElement("div",{id:"App-Body-Content"},o.a.createElement("div",{id:"Main-Left"},o.a.createElement("button",{id:"Home-Div",onClick:this.openSongWall},o.a.createElement("img",{src:v.a,className:"Blinq-logo",alt:"Blinq logo"})),e.state.user?o.a.createElement("div",{id:"Main-Left-Menu"},o.a.createElement("div",{id:"Header-Btns"},o.a.createElement("button",{id:"Profile-Btn",onClick:e.openEditProfile},"My Profile"),o.a.createElement("button",{id:"Logout-Btn",onClick:e.handleSignOut},"Logout")),o.a.createElement("div",{id:"Search-Div"},o.a.createElement("input",{id:"Search-Input"}),o.a.createElement("button",{id:"Search-Btn",onClick:e.handleSearch},o.a.createElement("div",{id:"mag-glass"},"\u26b2"))),o.a.createElement("button",{className:"Main-Left-Menu-Btn",onClick:e.openStudio},"STUDIO"),o.a.createElement("button",{className:"Main-Left-Menu-Btn",onClick:e.openSongWall},"SONG-WALL")):o.a.createElement(S,{signIn:e.handleSignIn})),o.a.createElement("div",{id:"Main-Content"},function(){if(e.state.user)switch(e.state.mainContent){case"studio":return o.a.createElement(k,{user:e.state.user,goto:e.setMainContent,playSong:e.handleSetSong});case"postsong":return o.a.createElement(T,{user:e.state.user,goto:e.setMainContent});case"record":return o.a.createElement(L,{user:e.state.user,goto:e.setMainContent});case"editprofile":return o.a.createElement(U,{user:e.state.user,gotoProfile:e.gotoProfile,goto:e.setMainContent});case"changepw":return o.a.createElement(E,{email:e.state.user.email,goto:e.setMainContent});case"profile":return o.a.createElement(F,{profileId:e.state.viewProfileId,setSong:e.handleSetSong,gotoSongDetails:e.gotoSongDetails});case"songdetails":return o.a.createElement(W,{song:e.state.viewSong,setSong:e.handleSetSong});default:return o.a.createElement(w,{setSong:e.handleSetSong,gotoProfile:e.gotoProfile,gotoSongDetails:e.gotoSongDetails})}else switch(e.state.mainContent){case"signup":return o.a.createElement(b,{gotoSignIn:e.setMainContent});default:return o.a.createElement("div",null)}}())))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},27:function(e,t,n){},35:function(e,t,n){e.exports=n.p+"static/media/TESTprofile-image.ab8d4060.png"},63:function(e,t,n){e.exports=n.p+"static/media/corner-logo-blinq.c9ee6b5e.png"},64:function(e,t,n){e.exports=n(125)},69:function(e,t,n){},8:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.96834dc5.chunk.js.map